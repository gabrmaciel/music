var albuns = {

    Xwv3: {
        id: "Xwv3",
        title: "Taylor Swift",
        record: "Big Machine",
        cover: "taylorswift.jpg",
        year: 2006,
        numberoftracks: 11,
        color: "rgb(88, 95, 72)",
        tracks: [
            ["Tim McGraw", "3:55", "yedeTF"],
            ["Picture to Burn", "2:55", "vDqgQH"],
            ["Teardrops on My Guitar", "3:35", "IGUkce"],
            ["A Place in This World", "3:22", "141ZAa"],
            ["Cold as You", "4:01", "02pBff"],
            ["The Outside", "3:29", "5b0M0Y"],
            ["Tied Together with a Smile", "4:11", "kHgXDu"],
            ["Stay Beautiful", "3:58", "nf3Nz1"],
            ["Should've Said No", "4:04", "UXN4Fy"],
            ["Mary's Song (Oh My My My)", "3:35", "iuKVfy"],
            ["Our Song", "3:22", "sQEPd8"],
        ]
    },

    hrj3: {
        id: "hrj3",
        title: "Fearless",
        record: "Big Machine",
        cover: "fearless.jpg",
        year: 2008,
        numberoftracks: 13,
        color: "rgb(138, 118, 95)",
        tracks: [
            ["Fearless", "4:03", "TkCQtD"],
            ["Fifteen", "4:55", "mMviR5"],
            ["Love Story", "3:56", "3fx0WQ"],
            ["Hey Stephen", "4:16", "wsI5Za"],
            ["White Horse", "3:55", "Q9BDpU"],
            ["You Belong with Me", "3:52", "0hPDJD"],
            ["Breathe", "4:25", "Cj3UOw"],
            ["Tell Me Why", "3:21", "j69d6i"],
            ["You're Not Sorry", "4:23", "yit82w"],
            ["The Way I Loved You", "4:05", "RC7cBB"],
            ["Forever & Always", "3:46", "oy7UUM"],
            ["The Best Day", "4:06", "Wr801G"],
            ["Change", "4:42", "yrTZSi"],
        ]
    },

    QPRI: {
        id: "QPRI",
        title: "Speak Now",
        record: "Big Machine",
        cover: "speaknow.jpg",
        year: 2010,
        numberoftracks: 14,
        color: "rgb(210, 178, 190)",
        tracks: [
            ["Mine", "3:50", "B4TNs0"],
            ["Sparks Fly", "4:20", "bnsbDy"],
            ["Back to December", "4:53", "noNFtg"],
            ["Speak Now", "4:00", "y5v9FO"],
            ["Dear John", "6:43", "76YSYn"],
            ["Mean", "3:57", "psqcJ4"],
            ["The Story of Us", "4:25", "T2D55Z"],
            ["Never Grow Up", "4:50", "UYpxrq"],
            ["Enchanted", "5:52", "J8daH2"],
            ["Better than Revenge", "3:37", "n14dH9"],
            ["Innocent", "5:02", "WnjsMD"],
            ["Haunted", "4:02", "Yv34Xu"],
            ["Last Kiss", "6:07", "08LmLo"],
            ["Long Live", "5:17", "bQ8yDH"],
        ]
    },

    IcgT: {
        id: "IcgT",
        title: "Red",
        record: "Big Machine",
        cover: "red.jpg",
        year: 2012,
        numberoftracks: 16,
        color: "rgb(79, 69, 81)",
        tracks: [
            ["State Of Grace", "4:55", "6voSad"],
            ["Red", "3:43", "oIDYAE"],
            ["Treacherous", "4:02", "jqeM4d"],
            ["I Know You Were Trouble.", "3:29", "j8z7QN"],
            ["All Too Well", "5:29", "r4aQbj"],
            ["22", "3:52", "HrzS9Q"],
            ["I Almost Do", "4:04", "knmr5M"],
            ["We Are Never Ever Getting Back Together", "3:13", "wyKChw"],
            ["Stay Stay Stay", "3:25", "jiLO3x"],
            ["The Last Time", "4:59", "3C0fa8"],
            ["Holy Ground", "3:23", "zQjlY6"],
            ["Sad Beautiful Tragic", "4:44", "EvdQrL"],
            ["The Lucky One", "4:00", "3aiotw"],
            ["Everything Has Changed", "4:05", "I4mQQe"],
            ["Starlight", "3:40", "CTUfHB"],
            ["Begin Again", "3:57", "h3bp6O"]
        ]
    },
    
    H3B7: {
        id: "H3B7",
        title: "1989",
        record: "Big Machine",
        cover: "1989.jpg",
        year: 2014,
        numberoftracks: 16,
        color: "rgb(204, 189, 172)",
        tracks: [
            ["Welcome To New York", "3:32", "a9r4PT"],
            ["Blank Space", "3:51", "fgqQ7K"],
            ["Style", "3:51", "EXxm5Z"],
            ["Out Of The Woods", "3:55", "krdclu"],
            ["All You Had To Do Was Stay", "3:13", "ADAgEP"],
            ["Shake It Off", "3:39", "sK7aQl"],
            ["I Wish You Would", "3:27", "wXcmjO"],
            ["Bad Blood", "3:31", "dRO0M5"],
            ["Wildest Dreams", "3:55", "2BVYU9"],
            ["How You Get the Girl", "4:07", "wIhFRY"],
            ["This Love", "4:10", "sdbV93"],
            ["I Know Places", "3:15", "7B6nCT"],
            ["Clean", "4:30", "HEMslz"],
            ["Wonderland", "4:05", "YK63jW"],
            ["You Are in Love", "4:27", "ymKr4v"],
            ["New Romantics", "3:50", "qU6vqE"],
        ]
    },

    fLvA: {
        id: "fLvA",
        title: "reputation",
        record: "Big Machine",
        cover: "reputation.jpg",
        year: 2017,
        numberoftracks: 15,
        color: "rgb(203, 203, 203)",
        tracks: [
            ["...Ready For It", "3:28", "Tog27G"],
            ["End Game", "4:04", "5GyVcn"],
            ["I Did Something Bad", "3:58", "MxEj9m"],
            ["Don't Blame Me", "3:56", "2uDujV"],
            ["Delicate", "3:52", "t0Jvc0"],
            ["Look What You Made Me Do", "3:31", "faFZQY"],
            ["So It Goes...", "3:47", "8h0agF"],
            ["Gorgeous", "3:29", "JK9d4q"],
            ["Getaway Car", "3:53", "Mi4TRH"],
            ["King of My Heart", "3:34", "d2SSoZ"],
            ["Dancing with Our Hands Tied", "3:31", "iNYqRd"],
            ["Dress", "3:50", "zXy0cw"],
            ["This Is Why We Can't Have Nice Things", "3:27", "YuUpUz"],
            ["Call It What You Want", "3:23", "CerJFv"],
            ["New Year's Day", "3:55", "NTKhhE"],
        ]
    },

    KnrD: {
        id: "KnrD",
        title: "Lover",
        record: "Big Machine",
        cover: "lover.jpg",
        year: 2019,
        numberoftracks: 18,
        color: "rgb(208, 185, 213)",
        tracks: [
            ["I Forget That You Existed", "2:51", "oDLgfy"],
            ["Cruel Summer", "2:58", "pgzjyJ"],
            ["Lover", "3:41", "JctXWm"],
            ["The Man", "3:10", "5H9diL"],
            ["The Archer", "3:31", "fopr84"],
            ["I Think He Knows", "2:53", "ej4Cnz"],
            ["Miss Americana & the Heartbreak Prince", "3:54", "xiImJ4"],
            ["Paper Rings", "3:42", "p5SmCq"],
            ["Cornelia Street", "4:47", "5D6hpo"],
            ["Death By a Thousand Cuts", "3:19", "FT4Ovt"],
            ["London Boy", "3:10", "ATYKhZ"],
            ["Soon You'll Get Better", "3:22", "feleXS"],
            ["False God", "3:20", "yaK6Gk"],
            ["You Need to Calm Down", "2:51", "ZCY1NQ"],
            ["Afterglow", "3:43", "nRkbiI"],
            ["Me!", "3:13", "oBQuWu"],
            ["It's Nice to Have a Friend", "2:30", "ZYOkgq"],
            ["Daylight", "4:53", "lEOMdn"],
        ]
    },
    
    mbAP: {
        id: "mbAP",
        title: "folklore",
        record: "Republic",
        cover: "folklore.jpg",
        year: 2020,
        numberoftracks: 16,
        color: "rgb(192, 192, 192)",
        tracks: [
            ["the 1", "3:30", "fjski4"],
            ["cardigan", "3:59", "WAgoXo"],
            ["the last great american dynasty", "3:51", "w8PlcD"],
            ["exile", "4:45", "nzrmhP"],
            ["my tears ricochet", "4:15", "GhKgWg"],
            ["mirrorball", "3:29", "PNRKnV"],
            ["seven", "3:28", "m9mbCQ"],
            ["august", "4:21", "kh6PWT"],
            ["this is me trying", "3:15", "bwtHqV"],
            ["illicit affairs", "3:10", "Rkt855"],
            ["invisible string", "4:12", "MCWuyN"],
            ["mad woman", "3:57", "2yp1qu"],
            ["epiphany", "4:49", "PGqH1D"],
            ["betty", "4:54", "46nvfb"],
            ["peace", "3:54", "3qxfpJ"],
            ["hoax", "3:40", "R2kOsJ"],
        ]
    },

    oj3r: {
        id: "oj3r",
        title: "evermore",
        record: "Republic",
        cover: "evermore.jpg",
        year: 2020,
        numberoftracks: 15,
        color: "rgb(244, 184, 149)",
        tracks: [
            ["​willow", "3:34", "rkblWF"],
            ["​champagne problems", "4:04", "nGRcJb"],
            ["gold rush", "3:05", "2mahiD"],
            ["tis the damn season", "3:49", "OrpKBV"],
            ["tolerate it", "4:05", "GtbVPx"],
            ["no body, no crime", "3:35", "F6tczN"],
            ["happiness", "5:15", "8aixki"],
            ["dorothea", "3:45", "JAaUDh"],
            ["coney island", "4:35", "5Dp4l3"],
            ["ivy", "4:20", "gDFDkz"],
            ["cowboy like me", "4:35", "QxYNDx"],
            ["long story short", "3:35", "WsufMm"],
            ["marjorie", "4:17", "DcVZtU"],
            ["closure", "3:00", "1a2j4o"],
            ["evermore", "5:04", "kGvsVT"],
        ]
    },
}

var lyrics = {

    J8daH2: [
        ["There I was again tonight forcing laughter, faking smiles", 13],
        ["Same old tired, lonely place", 19],
        ["Walls of insincerity", 24],
        ["Shifting eyes and vacancy vanished when I saw your face", 27],
        ["All I can say is it was enchanting to meet you", 34],
        ["Your eyes whispered 'have we met?'", 48],
        ["Across the room your silhouette starts to make it's way to me", 51],
        ["The playful conversation starts", 59],
        ["Counter all your quick remarks, like passing notes in secrecy", 63],
        ["And it was enchanting to meet you", 70],
        ["All I can say is I was enchanted to meet you", 80],
        ["This night is sparkling, don't you let it go", 95],
        ["I'm wonder struck, blushing all the way home", 101],
        ["I'll spend forever wondering if you knew", 107],
        ["I was enchanted to meet you", 113],
        ["The lingering question kept me up", 124],
        ["Two a.m., who do you love?", 127],
        ["I wonder till I'm wide awake", 130],
        ["Now I'm pacing back and forth, wishing you were at my door", 136],
        ["I'd open up and you would say, hey", 142],
        ["It was enchanting to meet you", 147],
        ["All I know is I was, enchanted to meet you", 157],
        ["This night is sparkling, don't you let it go", 172],
        ["I'm wonder struck, blushing all the way home", 177],
        ["I'll spend forever wondering if you knew", 183],
        ["This night is flawless, don't you let it go", 195],
        ["I'm wonder struck, dancing around all alone", 201],
        ["I'll spend forever wondering if you knew", 207],
        ["I was enchanted to meet you", 212],
        ["This is me praying that this was the very first page", 238],
        ["Not where the story line ends", 242],
        ["My thoughts will echo your name, until I see you again", 247],
        ["These are the words I held back, as I was leaving too soon", 253],
        ["I was enchanted to meet you", 259],
        ["Please don't be in love with someone else", 275],
        ["Please don't have somebody waiting on you", 280],
        ["Please don't be in love with someone else", 286],
        ["Please don't have somebody waiting on you", 292],
        ["This night is sparkling, don't you let it go", 299],
        ["I'm wonder struck, blushing all the way home", 305],
        ["I'll spend forever wondering if you knew", 311],
        ["This night is flawless, don't you let it go", 322],
        ["I'm wonder struck, dancing around all alone", 328],
        ["I'll spend forever wondering if you knew", 334],
        ["I was enchanted to meet you", 340],
        ["Please don't be in love with someone else", 345],
        ["Please don't have somebody waiting on you", 351],
    ],

    faFZQY: [
        ["I don't like your little games", 15],
        ["Don't like your tilted stage", 19],
        ["The role you made me play", 23],
        ["Of the fool, no, I don't like you", 27],
        ["I don't like your perfect crime", 30],
        ["How you laugh when you lie", 35],
        ["You said the gun was mine", 38],
        ["Isn't cool, no, I don't like you (oh!)", 42],
        ["But I got smarter, I got harder in the nick of time", 45],
        ["Honey, I rose up from the dead, I do it all the time", 49],
        ["I've got a list of names and yours is in red, underlined", 53],
        ["I check it once, then I check it twice, oh!", 57],
        ["Ooh, look what you made me do", 60],
        ["Look what you made me do", 63],
        ["Look what you just made me do", 65],
        ["Look what you just made me", 66],
        ["Ooh, look what you made me do", 68],
        ["Look what you made me do", 70],
        ["Look what you just made me do", 72],
        ["Look what you just made me do", 73],
        ["I don't like your kingdom keys", 75],
    ],

    rkblWF: [
        ["I'm like the water when your ship rolled in that night", 11],
        ["Rough on the surface, but you cut through like a knife", 17],
        ["And if it was an open-shut case", 24],
        ["I never would have known from the look on your face", 26],
        ["Lost in your current like a priceless wine", 30],
        ["The more that you say, the less I know", 35],
        ["Wherever you stray, I follow", 38],
    ]
}

var stories = {

    faFZQY: [
        ["A música foi escrita em 2016, logo após a exposição .", "reputation.jpg"],
        ["Donec finibus tortor quis ligula efficitur, a accumsan eros pulvinar. Quisque nec sapien nec diam accumsan volutpat et quis velit.", "kim.jpg"],
        ["Praesent bibendum nisl in justo fringilla, et sagittis nisl pellentesque. Nam quis nisi et tortor blandit luctus. Praesent non mi vel ante scelerisque dictum. Interdum et malesuada fames ac ante ipsum primis in faucibus.", "rep2.jpg"],
        ["Cras id lacus non nisl commodo accumsan in in orci. Suspendisse tristique nisl eget nisl condimentum dapibus. Duis aliquet, mauris eget gravida convallis", "lwymmd.jpg"],
    ],

    rkblWF: [
        ["Ainda nao coloquei os dados dessa musica, paciencia...", "reputation.jpg"],
        ["Donec finibus tortor quis ligula efficitur, a accumsan eros pulvinar. Quisque nec sapien nec diam accumsan volutpat et quis velit.", "kim.jpg"],
        ["Praesent bibendum nisl in justo fringilla, et sagittis nisl pellentesque. Nam quis nisi et tortor blandit luctus. Praesent non mi vel ante scelerisque dictum. Interdum et malesuada fames ac ante ipsum primis in faucibus.", "rep2.jpg"],
        ["Cras id lacus non nisl commodo accumsan in in orci. Suspendisse tristique nisl eget nisl condimentum dapibus. Duis aliquet, mauris eget gravida convallis", "lwymmd.jpg"],
    ],
}

window.tracksOpenedByStories = new Array();

///

function App(page, param){

    $.ajax({
        url: page+".html", 
        success: function(result){
            $("#App").html(result);
        }
    });
}

function Grid(){
    $("body").css("background-color", "rgb(51, 51, 51)")
    var albunsID = Object.keys(albuns);

    for(var i=0; i< albunsID.length; i++){
        
        var cover = albuns[albunsID[i]].cover;

        $("#Grid").append("<div class=\"grid\" onclick=\"App('player'); ChoosenAlbumID('"+ albunsID[i] +"')\"><div class=\"grid-play\"></div><img src=\"img/"+ cover +"\" ></div>");
    }
}

function ChoosenAlbumID(param){
    window.albumID = param;
}

function CheckAlbum(param){
    title = albuns[param].title;
    record = albuns[param].record;
    window.cover = albuns[param].cover;
    year = albuns[param].year;
    numberoftracks = albuns[param].numberoftracks;
    window.color = albuns[param].color;
    tracks = albuns[param].tracks;

    $("#player-voltar").html(title + " ("+ year +")");
    $("#album").attr("src",'img/'+cover);
    $("#player-title-title").html(title);
    $("#player-title-year").html(year);

    for(var i=0; i<numberoftracks; i++){

        var x = i + 1;
        var lyricsDetail = "";

        if(lyrics[tracks[i][2]]){
            lyricsDetail = "<div class=\"lyrics-detail\">LYRICS</div>";
        }

        $("#player-tracklist").append('<div class=\"player-tracklist-table-line\" onclick=\"Play(\''+tracks[i][2]+'\', \''+i+'\'); ReturnAlbumFromTrack(\''+tracks[i][2]+'\')" id="tracklist-'+i+'"><span class=\"player-tracklist-table-number\">'+x+'</span><span class=\"player-tracklist-table-title\"><div class=\"player-name\">'+tracks[i][0]+'</div>'+ lyricsDetail +'</span><span class="\player-tracklist-table-duration\">'+tracks[i][1]+'</span></div>');
    }

    $("#record").html(record);

    $("body").css("background", color);
}

function ReturnAlbumFromTrack(param){
    var albunsID = Object.keys(albuns);
    var albunslength = albunsID.length;
    
    for(var i=0; i<albunslength; i++){

        var faixasdoalbum = albuns[albunsID[i]].tracks;

        for(var x=0; x<faixasdoalbum.length; x++){

            var faixaporfaixadoalbum = faixasdoalbum[x];

            if(faixaporfaixadoalbum[2] == param){
                return albuns[albunsID[i]].id;
            }
        }
    }
}


function Play(param, pos){
    var album = ReturnAlbumFromTrack(param);
    window.musicToBePlayed = param;

    setTimeout(function(){
        $("h1").html(albuns[album].tracks[pos][0]);
        $("#audio").attr("src", "audio/"+album+"/"+param+".mp3");
        $("#player-div").css("display", "block");
        $(".player-div-mask").css("background-color", albuns[album].color);
        $(".player-div-img").css("background-image", "url(img/"+ albuns[album].cover +")");
        $(".player-title-name").html(albuns[album].tracks[pos][0]);
        PlayerConstructor(param);
    
        var a = $("#audio")[0];
        a.play();
        PlayMusic();
        $("#player-album-audio").css("display", "block");
        $("#player-lyrics").css("display", "block")
    
        window.posTracklist = parseInt(pos);
        window.trackID = albuns[album].tracks[pos][2];
    
        $(".player-tracklist-table-line").css("background-color", "transparent");
        $(".player-tracklist-table-line").css("pointer-events", "inherit");
        $("#tracklist-"+pos).css("background-color", "rgba(255, 255, 255, 0.05)");
        $("#tracklist-"+pos).css("pointer-events", "none");
    
        var numberoftrackspos = albuns[album].numberoftracks - 1;
    
        if(posTracklist > 0){
            $("#previous").css("pointer-events", "auto");
            $("#previous").css("opacity", "0.75");
        }else if(posTracklist == 0){
            $("#previous").css("pointer-events", "none");
            $("#previous").css("opacity", "0.25");
        }
    
        if(posTracklist < numberoftrackspos){
            $("#next").css("pointer-events", "auto");
            $("#next").css("opacity", "0.75");
        }else{
            $("#next").css("pointer-events", "none");
            $("#next").css("opacity", "0.25");
        }

    }, 1000);

    
}

function PlayerConstructor(param){
    var track = lyrics[param];

    if(track){
        $("#player-album-lyrics-div").css("pointer-events", "inherit");
        $("#player-album-lyrics-div").css("opacity", "0.9");
        $("#player-album-lyrics-div").html("<div class=\"player-album-lyrics\" id=\"player-album-lyrics\" onclick=\"PlayLyrics('"+ musicToBePlayed +"')\"></div>");
    }else{
        $("#player-album-lyrics-div").css("pointer-events", "none");
        $("#player-album-lyrics-div").css("opacity", "0.2")
        $("#player-album-lyrics-div").html("");
    }
    
}

function PlayLyrics(param){

    var lyricspos = 0;
    var track = lyrics[param];
    window.fisrtLyricTrack = track[0][0];

    window.setInterval(function(){
        var time = $("#audio")[0].currentTime;
        time = Math.round(time);
        

        if(time >= track[lyricspos][1]){

            var lyricssec = lyricspos + 1;

            $("#lyrics-top").html(track[lyricspos][0]);
            $("#lyrics-sec").html(track[lyricssec][0]);

            lyricspos = lyricspos + 1
        }

    }, 300);

    App('lyrics');
}

function NextMusic(){
    var album = ReturnAlbumFromTrack(musicToBePlayed);

    var numberoftracks = albuns[album].numberoftracks;
    var posTracklistNext = posTracklist + 2;

    if(numberoftracks >= posTracklistNext){
        posTracklist = posTracklist + 1;
        var nextmusic = albuns[album].tracks[posTracklist];
        Play(nextmusic[2], posTracklist);

    }

    if(numberoftracks == posTracklistNext){
        $("#next").css("pointer-events", "none");
        $("#next").css("opacity", "0.25");
    }

    if(posTracklist > 0){
        $("#previous").css("pointer-events", "auto");
        $("#previous").css("opacity", "0.75");
    }
    
}

function PreviousMusic(){
    var album = ReturnAlbumFromTrack(musicToBePlayed);

    var numberoftracks = albuns[album].numberoftracks;

    if(posTracklist > 0){
        posTracklist = posTracklist - 1;
        var nextmusic = albuns[album].tracks[posTracklist];
        Play(nextmusic[2], posTracklist);
    }

    if(posTracklist == 0){
        $("#previous").css("pointer-events", "none");
        $("#previous").css("opacity", "0.25");
    }

    if(posTracklist < numberoftracks){
        $("#next").css("pointer-events", "auto");
        $("#next").css("opacity", "0.75");
    }
    
}

function PlayMusic(){
    $("#play").css("display", "none");
    $("#pause").css("display", "inline-block");
    
    $("#audio")[0].play();
}

function PauseMusic(){
    $("#play").css("display", "inline-block");
    $("#pause").css("display", "none");

    $("#audio")[0].pause();
}


function LyricsClose(){
    $("#Lyrics").css("display", "none");
}

function LyricsConstructorImage(param){
    var classBorder = "";
    var classImgRadius = "";
    var story = stories[param];

    if(story){
        
        if(window.tracksOpenedByStories.includes(param)){
            classBorder = "lyrics-album-border-opened";
        }else{
            classBorder = "lyrics-album-border";
        }
        
        classImgRadius = "lyrics-album-img-radius";
    }

    $("#lyrics-div").html("<div id=\"lyrics-album\" class=\"lyrics-album "+ classBorder +"\" onclick=\"App('stories')\"><div class=\"lyrics-album-img "+ classImgRadius +"\" id=\"lyrics-album-img\">&nbsp;</div></div>");
}

function StoriesConstructor(param){
    var story = stories[param];

    if(!story){
        App('lyrics')
    }else{
        window.storylength = story.length;

        for(var i=0; i<story.length; i++){
            $("#track-linha").append("<div class=\"track-linha-div\"><div class=\"track-linha-div-play\" id=\"track-linha-div-play-"+ i +"\">&nbsp;</div></div>");
            $("#stories-box").append("<li id=\"story-img-"+ i +"\" class=\"story-img\" style=\"display:none; background-image:url(img/stories/"+ param +"/"+ story[i][1] +")\"><div class=\"stories-layer\"><span id=\"stories-text\">"+ story[i][0] +"</span></div></li>");
        }
    
        Stories('0');
    }
    
}

function Stories(param){
    window.storytrack;

    if(param == '0'){
        storytrack = 0;
    }
    
    if(param == "before"){
        storytrack = storytrack - 1;
        $("#track-linha-div-play-"+ storytrack).css("width", "0%")
    }
    
    if(param == "after"){
        storytrack = storytrack + 1;
        $("#track-linha-div-play-"+ storytrack).css("width", "100%")
    }

    if(storytrack < 0){
        storytrack = 0
    }

    if(storytrack > storylength - 1){
        App('lyrics');
    }

    $(".story-img").css("display", "none");
    $("#story-img-"+storytrack).css("display", "block");
    $("#track-linha-div-play-"+ storytrack).css("width", "100%")

}

function StoriesOpened(param){

    if(window.tracksOpenedByStories.includes(param)){

    }else{
        window.tracksOpenedByStories.push(param);
    }
    
}

function getAverageRGB(imgEl) {

    var blockSize = 5, // only visit every 5 pixels
        defaultRGB = {r:0,g:0,b:0}, // for non-supporting envs
        canvas = document.createElement('canvas'),
        context = canvas.getContext && canvas.getContext('2d'),
        data, width, height,
        i = -4,
        length,
        rgb = {r:0,g:0,b:0},
        count = 0;

    if (!context) {
        return defaultRGB;
    }

    height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;
    width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;

    context.drawImage(imgEl, 0, 0);

    try {
        data = context.getImageData(0, 0, width, height);
    } catch(e) {
        /* security error, img on diff domain */
        return defaultRGB;
    }

    length = data.data.length;

    while ( (i += blockSize * 4) < length ) {
        ++count;
        rgb.r += data.data[i];
        rgb.g += data.data[i+1];
        rgb.b += data.data[i+2];
    }

    // ~~ used to floor values
    rgb.r = ~~(rgb.r/count);
    rgb.g = ~~(rgb.g/count);
    rgb.b = ~~(rgb.b/count);

    return rgb;

}
